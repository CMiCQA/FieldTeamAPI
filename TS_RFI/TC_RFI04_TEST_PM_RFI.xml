<?xml version="1.0" encoding="UTF-8"?>
<con:testCase xmlns:con="http://eviware.com/soapui/config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="56a6d424-06ca-4166-b1ce-037938054892" discardOkResults="false" failOnError="false" failTestCaseOnErrors="true" keepSession="false" name="TC_RFI04_TEST_PM_RFI" searchProperties="true" timeout="0">
  <con:settings id="81e29419-8ae6-4449-b96a-429811827cca">
    <con:setting id="77b517c4-33bb-4fb9-b06e-108bcb716a75fileName">TC_RFI04_TEST_PM_RFI</con:setting>
    <con:setting id="56a6d424-06ca-4166-b1ce-037938054892fileName">TC_RFI04_TEST_PM_RFI</con:setting>
  </con:settings>
  <con:testStep type="restrequest" name="Login" id="b74abfa6-9d14-4946-82cf-9e8978753ea7">
    <con:settings/>
    <con:config service="ConstructPM Webservices" methodName="Login" resourcePath="/cmic-field-rest-api/jersey/v1/login/{cmic-env}" xsi:type="con:RestRequestStep">
      <con:restRequest name="Login" id="dd3deeb3-b92e-4688-bae8-3c451e379e74" mediaType="application/json">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>https://qamob.cmicpaas.com</con:endpoint>
        <con:request/>
        <con:originalUri>https://nova-mobile-test.cmiccloud.com/cmictestnew/cmic-field-rest-api/jersey/v1/login/</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="748beaf4-c442-470d-b2d0-17f69ffd6671" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="Response SLA Assertion" id="6389098b-38c2-45de-9085-2117c1c02304" name="Response SLA" disabled="true">
          <con:configuration>
            <SLA>200</SLA>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters/>
        <con:environmentSpec>
          <con:entry environmentId="dcf09228-28f0-461d-97ba-ae52da190086">
            <con:authProfile>QALATEST</con:authProfile>
          </con:entry>
          <con:entry environmentId="e6982624-acb8-444c-873d-074f9555a666">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8c42fbef-6237-4219-8044-b73695a4c38c">
            <con:authProfile>QADAILY2</con:authProfile>
          </con:entry>
          <con:entry environmentId="a4f87cd8-f67a-452d-bd63-2a15b6cdd2b6">
            <con:authProfile>TESTRAIL</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="Get All RFIs" id="46cf1a3f-f49c-4f94-9af5-c391987846f3">
    <con:settings/>
    <con:config service="All Webservices" resourcePath="/pm-rest-api/rest/1/pmrfi" methodName="Retrieve RFIs" xsi:type="con:RestRequestStep">
      <con:restRequest name="Get All RFIs" id="19445539-5254-4f71-9006-79b674e46aa6" mediaType="application/json">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:request/>
        <con:originalUri>https://qalatestmob.cmicpaas.com/cmicqalatest/pm-rest-api/rest/1/pmrfi</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="af8f4a5e-b3d6-4fd8-aa8d-66a1be73c1b1" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="Response SLA Assertion" id="a57beefa-5d62-4ce6-ab1f-45db5fff5f3e" name="Response SLA" disabled="true">
          <con:configuration>
            <SLA>200</SLA>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="limit" value="5"/>
          <con:entry key="finder" value=""/>
        </con:parameters>
        <con:environmentSpec>
          <con:entry environmentId="e6982624-acb8-444c-873d-074f9555a666">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8c42fbef-6237-4219-8044-b73695a4c38c">
            <con:authProfile>QADAILY2</con:authProfile>
          </con:entry>
          <con:entry environmentId="666f0f54-3a2d-4ab8-b829-d61485c4034e">
            <con:authProfile>UPG</con:authProfile>
          </con:entry>
          <con:entry environmentId="4a8025f4-94ea-4501-9fea-c97dcac8b6cf">
            <con:authProfile>NOVATEST</con:authProfile>
          </con:entry>
          <con:entry environmentId="dcf09228-28f0-461d-97ba-ae52da190086">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="a4f87cd8-f67a-452d-bd63-2a15b6cdd2b6">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="Get RFI via SelectProjRfi" id="b7379885-9489-4c37-9f47-24aaac560f4b">
    <con:settings/>
    <con:config service="All Webservices" resourcePath="/pm-rest-api/rest/1/pmrfi" methodName="Retrieve RFIs" xsi:type="con:RestRequestStep">
      <con:restRequest name="Get RFI via SelectProjRfi" id="19445539-5254-4f71-9006-79b674e46aa6" mediaType="application/json">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:request/>
        <con:originalUri>https://qalatestmob.cmicpaas.com/cmicqalatest/pm-rest-api/rest/1/pmrfi</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="0a8c7e1f-69f7-41db-aba2-e0f4fa0b3d14" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="Response SLA Assertion" id="0ad036bb-b30d-4895-832a-80a0ddb6363d" name="Response SLA" disabled="true">
          <con:configuration>
            <SLA>200</SLA>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="limit" value="5"/>
          <con:entry key="finder" value="selectProjRfi;compCode=${Login#Response#$['companyCode']},projCode=${Login#Response#$['defaultProjectCode']}"/>
        </con:parameters>
        <con:environmentSpec>
          <con:entry environmentId="e6982624-acb8-444c-873d-074f9555a666">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8c42fbef-6237-4219-8044-b73695a4c38c">
            <con:authProfile>QADAILY2</con:authProfile>
          </con:entry>
          <con:entry environmentId="666f0f54-3a2d-4ab8-b829-d61485c4034e">
            <con:authProfile>UPG</con:authProfile>
          </con:entry>
          <con:entry environmentId="4a8025f4-94ea-4501-9fea-c97dcac8b6cf">
            <con:authProfile>NOVATEST</con:authProfile>
          </con:entry>
          <con:entry environmentId="dcf09228-28f0-461d-97ba-ae52da190086">
            <con:authProfile>QALATEST</con:authProfile>
          </con:entry>
          <con:entry environmentId="a4f87cd8-f67a-452d-bd63-2a15b6cdd2b6">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="Create New RFI" id="9b2f43a6-822b-40cd-88cd-6caf77d036f9">
    <con:settings/>
    <con:config service="All Webservices" resourcePath="/pm-rest-api/rest/1/pmrfi" methodName="Create RFI (NEED TO TAKE ANOTHER LOOK)" xsi:type="con:RestRequestStep">
      <con:restRequest name="Create New RFI" id="e40e3600-2d1e-4587-957d-fcd298229aa9" mediaType="application/vnd.oracle.adf.resourceitem+json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:request>{\r
   "PmrfiCompCode" : "${Get All RFIs#Response#$['items'][0]['PmrfiCompCode']}",\r
   "PmrfiProjCode" : "${Get All RFIs#Response#$['items'][0]['PmrfiProjCode']}",\r
   "PmrfiFromPartnCode" : "${Get All RFIs#Response#$['items'][0]['PmrfiFromPartnCode']}",\r
   "PmrfiFromPartnTypeCode" : "${Get All RFIs#Response#$['items'][0]['PmrfiFromPartnTypeCode']}",\r
   "PmrfiFromContactCode" : "${Get All RFIs#Response#$['items'][0]['PmrfiFromContactCode']}",\r
   "PmrfiToPartnCode" : "${Get All RFIs#Response#$['items'][0]['PmrfiToPartnCode']}",\r
   "PmrfiToPartnTypeCode" : "${Get All RFIs#Response#$['items'][0]['PmrfiToPartnTypeCode']}",\r
   "PmrfiToContactCode" : "${Get All RFIs#Response#$['items'][0]['PmrfiToContactCode']}",\r
   "PmrfiSubject" : "test webservice",\r
   "PmrfiAcceptSuggestionFlag" : "Y",\r
   "PmrfiVUuid" : ""\r
}</con:request>
        <con:originalUri>https://qalatestmob.cmicpaas.com/cmicqalatest/pm-rest-api/rest/1/pmrfi</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="9fedd273-0251-49f1-bd63-1657b548960e" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>201</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="Response SLA Assertion" id="eb8991a3-f343-480c-8530-396b636f9ae0" name="Response SLA" disabled="true">
          <con:configuration>
            <SLA>200</SLA>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters/>
        <con:environmentSpec>
          <con:entry environmentId="e6982624-acb8-444c-873d-074f9555a666">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8c42fbef-6237-4219-8044-b73695a4c38c">
            <con:authProfile>QADAILY2</con:authProfile>
          </con:entry>
          <con:entry environmentId="666f0f54-3a2d-4ab8-b829-d61485c4034e">
            <con:authProfile>UPG</con:authProfile>
          </con:entry>
          <con:entry environmentId="4a8025f4-94ea-4501-9fea-c97dcac8b6cf">
            <con:authProfile>NOVATEST</con:authProfile>
          </con:entry>
          <con:entry environmentId="dcf09228-28f0-461d-97ba-ae52da190086">
            <con:authProfile>QALATEST</con:authProfile>
          </con:entry>
          <con:entry environmentId="a4f87cd8-f67a-452d-bd63-2a15b6cdd2b6">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="Update RFI" id="c2e5e380-f51a-40cc-b7c7-433f77118b29">
    <con:settings/>
    <con:config service="All Webservices" resourcePath="/pm-rest-api/rest/1/pmrfi/{Uuid}" methodName="Update Specific" xsi:type="con:RestRequestStep">
      <con:restRequest name="Update RFI" id="e86155d3-a9f0-48f5-b636-0cb30583448a" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:request>{
	"PmrfiStatusCode" : "CLOSED"
}</con:request>
        <con:originalUri>https://qalatestmob.cmicpaas.com/cmicqalatest/pm-rest-api/rest/1/pmrfi/afd7ef5f-04b3-478b-aa6d-c72a393ec8aa</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="ceef47ed-3a1c-4201-aa2e-9c5a18d00efb" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="Response SLA Assertion" id="daf0441e-85ce-4716-8a17-c8614d506177" name="Response SLA" disabled="true">
          <con:configuration>
            <SLA>200</SLA>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Uuid" value="${Create New RFI#Response#$['PmrfiVUuid']}"/>
        </con:parameters>
        <con:environmentSpec>
          <con:entry environmentId="e6982624-acb8-444c-873d-074f9555a666">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8c42fbef-6237-4219-8044-b73695a4c38c">
            <con:authProfile>QADAILY2</con:authProfile>
          </con:entry>
          <con:entry environmentId="666f0f54-3a2d-4ab8-b829-d61485c4034e">
            <con:authProfile>UPG</con:authProfile>
          </con:entry>
          <con:entry environmentId="4a8025f4-94ea-4501-9fea-c97dcac8b6cf">
            <con:authProfile>NOVATEST</con:authProfile>
          </con:entry>
          <con:entry environmentId="dcf09228-28f0-461d-97ba-ae52da190086">
            <con:authProfile>QALATEST</con:authProfile>
          </con:entry>
          <con:entry environmentId="a4f87cd8-f67a-452d-bd63-2a15b6cdd2b6">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="Get RFI via Uuid" id="d0b3034c-dba4-4796-a329-9ad5101d41cd">
    <con:settings/>
    <con:config service="All Webservices" resourcePath="/pm-rest-api/rest/1/pmrfi/{Uuid}" methodName="Retrieve Specific" xsi:type="con:RestRequestStep">
      <con:restRequest name="Get RFI via Uuid" id="15513463-a12c-4e61-a3ca-a385c6382a99" mediaType="application/json">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:request/>
        <con:originalUri>https://qalatestmob.cmicpaas.com/cmicqalatest/pm-rest-api/rest/1/pmrfi/afd7ef5f-04b3-478b-aa6d-c72a393ec8aa</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="547f1783-6844-4d9a-a8ae-399d88177491" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="Response SLA Assertion" id="1e13eb5e-1264-42a2-87b1-963f7de41302" name="Response SLA" disabled="true">
          <con:configuration>
            <SLA>200</SLA>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Uuid" value="${Update RFI#Response#$['PmrfiVUuid']}"/>
        </con:parameters>
        <con:environmentSpec>
          <con:entry environmentId="e6982624-acb8-444c-873d-074f9555a666">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8c42fbef-6237-4219-8044-b73695a4c38c">
            <con:authProfile>QADAILY2</con:authProfile>
          </con:entry>
          <con:entry environmentId="666f0f54-3a2d-4ab8-b829-d61485c4034e">
            <con:authProfile>UPG</con:authProfile>
          </con:entry>
          <con:entry environmentId="4a8025f4-94ea-4501-9fea-c97dcac8b6cf">
            <con:authProfile>NOVATEST</con:authProfile>
          </con:entry>
          <con:entry environmentId="dcf09228-28f0-461d-97ba-ae52da190086">
            <con:authProfile>QALATEST</con:authProfile>
          </con:entry>
          <con:entry environmentId="a4f87cd8-f67a-452d-bd63-2a15b6cdd2b6">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="Delete RFI" id="38c1d4cf-ad37-4511-821a-dce812e74d40">
    <con:settings/>
    <con:config service="All Webservices" resourcePath="/pm-rest-api/rest/1/pmrfi/{Uuid}" methodName="Delete Specific" xsi:type="con:RestRequestStep">
      <con:restRequest name="Delete RFI" id="83b56004-b501-4610-b3f3-80cf42b49b48" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:request/>
        <con:originalUri>https://qalatestmob.cmicpaas.com/cmicqalatest/pm-rest-api/rest/1/pmrfi/afd7ef5f-04b3-478b-aa6d-c72a393ec8aa</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="59300e83-2dba-4682-9b9b-c09ab63677dd" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>204</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="Response SLA Assertion" id="91c7f6ea-a1d4-4927-8bb1-ab600391463b" name="Response SLA" disabled="true">
          <con:configuration>
            <SLA>200</SLA>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Uuid" value="${Get RFI via Uuid#Response#$['PmrfiVUuid']}"/>
        </con:parameters>
        <con:environmentSpec>
          <con:entry environmentId="e6982624-acb8-444c-873d-074f9555a666">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8c42fbef-6237-4219-8044-b73695a4c38c">
            <con:authProfile>QADAILY2</con:authProfile>
          </con:entry>
          <con:entry environmentId="666f0f54-3a2d-4ab8-b829-d61485c4034e">
            <con:authProfile>UPG</con:authProfile>
          </con:entry>
          <con:entry environmentId="4a8025f4-94ea-4501-9fea-c97dcac8b6cf">
            <con:authProfile>NOVATEST</con:authProfile>
          </con:entry>
          <con:entry environmentId="dcf09228-28f0-461d-97ba-ae52da190086">
            <con:authProfile>QALATEST</con:authProfile>
          </con:entry>
          <con:entry environmentId="a4f87cd8-f67a-452d-bd63-2a15b6cdd2b6">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="Get RFI via Uuid - Ensure deletion" id="555f6144-afb7-4bac-ae15-872d497b275d">
    <con:settings/>
    <con:config service="All Webservices" resourcePath="/pm-rest-api/rest/1/pmrfi/{Uuid}" methodName="Retrieve Specific" xsi:type="con:RestRequestStep">
      <con:restRequest name="Get RFI via Uuid - Ensure deletion" id="15513463-a12c-4e61-a3ca-a385c6382a99" mediaType="application/json">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:request/>
        <con:originalUri>https://qalatestmob.cmicpaas.com/cmicqalatest/pm-rest-api/rest/1/pmrfi/afd7ef5f-04b3-478b-aa6d-c72a393ec8aa</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="547f1783-6844-4d9a-a8ae-399d88177491" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>404</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="Response SLA Assertion" id="1e13eb5e-1264-42a2-87b1-963f7de41302" name="Response SLA" disabled="true">
          <con:configuration>
            <SLA>200</SLA>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Uuid" value="${Update RFI#Response#$['PmrfiVUuid']}"/>
        </con:parameters>
        <con:environmentSpec>
          <con:entry environmentId="e6982624-acb8-444c-873d-074f9555a666">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="8c42fbef-6237-4219-8044-b73695a4c38c">
            <con:authProfile>QADAILY2</con:authProfile>
          </con:entry>
          <con:entry environmentId="666f0f54-3a2d-4ab8-b829-d61485c4034e">
            <con:authProfile>UPG</con:authProfile>
          </con:entry>
          <con:entry environmentId="4a8025f4-94ea-4501-9fea-c97dcac8b6cf">
            <con:authProfile>NOVATEST</con:authProfile>
          </con:entry>
          <con:entry environmentId="dcf09228-28f0-461d-97ba-ae52da190086">
            <con:authProfile>QALATEST</con:authProfile>
          </con:entry>
          <con:entry environmentId="a4f87cd8-f67a-452d-bd63-2a15b6cdd2b6">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="PostResultsToTestRail" id="84f500dd-9ce6-4173-bffb-842538afd747" disabled="true">
    <con:settings/>
    <con:config>
      <script/>
    </con:config>
  </con:testStep>
  <con:tearDownScript>import groovy.json.JsonOutput
import java.net.HttpURLConnection
import java.net.URL

// Function to post test result to TestRail
def postTestResultToTestRail() {

	def testRailUrl = context.expand( '${#Global#TestRailUrl}' )
	def testRailUsername = context.expand( '${#Global#TestRailUserName}' )
	def testRailApiKey = context.expand( '${#Global#TestRailAPIkey}' )
	
	// Define your TestRail project ID and test run ID
	def projectId = context.expand( '${#Project#projectID}' )
	def testRunId = context.expand( '${#Project#RunID}' )
	
	// Define the test case ID for the test you want to post results for
	def testCaseId = context.expand( '${#TestCase#TestCaseID}' )  
	
	// loop through previous steps to get results to see if all passed
	def testCaseName = testRunner.testCase.name
	def failedTestStep = ""
	def testMsg = ""
	def result = ""
	def statusId = ""
	def comment = ""
	
	for(r in testRunner.results) {
		if(r.getStatus().toString() != "PASS") {
			result = context.expand('${' + r.testStep.name + '#Response}')
		 	failedTestStep =  r.testStep.name
			break
		}
	}
	// set test status and comment based on previous step results
	if(failedTestStep == "") {
		testMsg = testCaseName + " has passed successfully"
		statusId = 1
		comment = testMsg 
	} else {
		testMsg = testCaseName + " has failed on test step: \'" + failedTestStep + "\'"
		if(result != "") {
			testMsg = testMsg + " with reason - " + result
		}
		statusId = 5
		comment = testMsg 
	}	
    def postUrl = "${testRailUrl}/add_result_for_case/${testRunId}/${testCaseId}"

    def connection = new URL(postUrl).openConnection() as HttpURLConnection
    connection.requestMethod = 'POST'
    connection.doOutput = true
    connection.setRequestProperty("Content-Type", "application/json")
    connection.setRequestProperty("Authorization", "Basic " + "${testRailUsername}:${testRailApiKey}".bytes.encodeBase64().toString())

    def requestBody = [
        status_id: statusId,
        comment: comment
    ]

    def outputStream = connection.outputStream
    outputStream.write(JsonOutput.toJson(requestBody).getBytes())
    outputStream.flush()

    def responseCode = connection.responseCode
    def responseMessage = connection.responseMessage

    log.info("Response code: ${responseCode}")
    log.info("Response message: ${responseMessage}")
}

// Post test result to TestRail
postTestResultToTestRail()</con:tearDownScript>
  <con:properties>
    <con:property>
      <con:name>TestCaseID</con:name>
      <con:value>104544</con:value>
    </con:property>
  </con:properties>
  <con:reportParameters/>
  <con:environmentSpec>
    <con:entry environmentId="a4f87cd8-f67a-452d-bd63-2a15b6cdd2b6">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
  </con:environmentSpec>
  <con:tagId>c4a9b3b0-fe4d-44b8-a1cd-e873e92e452a</con:tagId>
  <con:tagId>51a705db-8658-4c1c-8906-9eabeb6e3447</con:tagId>
</con:testCase>
